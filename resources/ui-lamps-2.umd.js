(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".lamps-wrapper[data-v-0d549e81]{display:inline}.flex[data-v-0d549e81]{display:flex}")),document.head.appendChild(e)}}catch(d){console.error("vite-plugin-css-injected-by-js",d)}})();
(function(i,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],a):(i=typeof globalThis<"u"?globalThis:i||self,a(i["ui-lamps-2"]={},i.Vue,i.vuex))})(this,function(i,a,l){"use strict";function h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p=m,f=/\s/,u=/(_|-|\.|:)/,d=/([a-z][A-Z]|[A-Z][a-z])/;function m(t){return f.test(t)?t.toLowerCase():u.test(t)?(x(t)||t).toLowerCase():d.test(t)?b(t).toLowerCase():t.toLowerCase()}var g=/[\W_]+(.|$)/g;function x(t){return t.replace(g,function(e,s){return s?" "+s:""})}var v=/(.)([A-Z]+)/g;function b(t){return t.replace(v,function(e,s,r){return s+" "+r.toLowerCase().split("").join(" ")})}var w=p,C=y;function y(t){return w(t).replace(/[a-z]/i,function(e){return e.toUpperCase()}).trim()}var _=function(t){return String(t).replace(/([.*+?=^!:${}()|[\]\/\\])/g,"\\$1")},S=["a","an","and","as","at","but","by","en","for","from","how","if","in","neither","nor","of","on","only","onto","out","or","per","so","than","that","the","to","until","up","upon","v","v.","versus","vs","vs.","via","when","with","without","yet"],$=C,k=_,P=S,L=M,E=P.map(k),I=new RegExp("[^^]\\b("+E.join("|")+")\\b","ig"),j=/:\s*(\w)/g;function M(t){return $(t).replace(/(^|\s)(\w)/g,function(e,s,r){return s+r.toUpperCase()}).replace(I,function(e){return e.toLowerCase()}).replace(j,function(e){return e.toUpperCase()})}const z=h(L),B=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},O={name:"UILamps",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){console.info("UILamps setup with:",t),console.debug("Vue function loaded correctly",a.markRaw)},data(){return{input:{title:"some text here will base turned into title case."},params:this.params,canvas:null,ctx:null,props:this.props}},computed:{titleCase(){return z(this.input.title)},...l.mapState("data",["messages"]),changeDisplay(){switch(this.props.direction){case"Vertical":return"lamps-wrapper";case"Horizontal":return"flex"}}},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.on("msg-input:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t}),t.lamps.forEach((s,r)=>{let n=o(s.color);this.canvas=this.$refs["canvas-"+r][0],console.log(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.reset(),this.ctx.globalAlpha=1,this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#999999",this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),this.ctx.fillStyle=n.off,s.phase=="Square"?this.ctx.rect(20,20,60,60):s.phase=="Circle"&&this.ctx.arc(50,50,40,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),s.state&&(s.phase=="Square"?this.ctx.rect(20,20,60,60):s.phase=="Circle"&&this.ctx.arc(50,50,40,0,2*Math.PI),this.ctx.filter="blur(7px)",this.ctx.fillStyle=n.on),this.ctx.closePath(),this.ctx.fill()})}),this.drawCanvasFst(),this.$socket.emit("widget-load",this.id)},unmounted(){var t,e;(t=this.$socket)==null||t.off("widget-load"+this.id),(e=this.$socket)==null||e.off("msg-input:"+this.id)},methods:{send(t){this.$socket.emit("widget-action",this.id,t)},alert(t){alert(t)},test(){console.info("custom event handler:"),this.$socket.emit("my-custom-event",this.id,{payload:"Custom Event"})},drawCanvasFst(){this.props.params.forEach((t,e)=>{let s=o(t.color);this.canvas=this.$refs["canvas-"+e][0],console.log(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.globalAlpha=1,this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#999999",this.ctx.closePath(),this.ctx.fill(),this.ctx.beginPath(),t.phase=="Square"?this.ctx.rect(20,20,60,60):t.phase=="Circle"&&this.ctx.arc(50,50,40,0,2*Math.PI),this.ctx.fillStyle=s.off,this.ctx.closePath(),this.ctx.fill()})}}};function o(t){let e={};return t=="Red"?(e.on="rgb(255, 30, 30)",e.off="rgb(80, 80, 80)"):t=="Green"?(e.on="rgb(10, 255, 10)",e.off="rgb(80, 80, 80)"):t=="Blue"?(e.on="rgb(70, 70, 255)",e.off="rgb(80, 80, 80)"):t=="Yellow"?(e.on="rgb(255, 255, 30)",e.off="rgb(80, 80, 80)"):t=="Orange"?(e.on="rgb(255, 170, 30)",e.off="rgb(80, 80, 80)"):t=="Purple"?(e.on="rgb(255, 30, 255)",e.off="rgb(80, 80, 80)"):t=="White"&&(e.on="rgb(255, 255, 255)",e.off="rgb(80, 80, 80)"),e}const U={style:{fontSize:"14px",width:"100px",textAlign:"center",align:"center"}};function q(t,e,s,r,n,T){return a.openBlock(),a.createElementBlock("div",{className:"ui-lamps-wrapper",class:a.normalizeClass(T.changeDisplay)},[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(n.props.params,(N,c)=>(a.openBlock(),a.createElementBlock("div",{id:"lamps",key:c},[a.createElementVNode("canvas",{ref_for:!0,ref:"canvas-"+c,width:"100",height:"100"},null,512),a.createElementVNode("p",U,a.toDisplayString(N.name),1)]))),128))],2)}const A=B(O,[["render",q],["__scopeId","data-v-0d549e81"]]);i.UILamps=A,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
